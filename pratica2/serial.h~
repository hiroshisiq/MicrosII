#include <at89x52.h>

void delay(int mstime) {
	unsigned int i, j;
	for(i=0; i<mstime; i++)
		for(j=0; j<1275; j++);
}


void send(char data) {
	// Load most significant nibble
	P0 = (P0 & 0x0F) | (data & 0xF0);
	// Load less significant nibble
	P2 = data;
	// Enable pulse 
	P0_2 = 1;	
	P0_2 = 0;
	// Wait LCD
	delay(2);
}

void configure8bits() {
	P0 = 0x00;
	delay(20);
	send(0x0E); // display on
	send(0x06); // write to >>
	send(0x01); // clear
}

void clearLCD(){
    // clear
    send(0x01);
}

void write(char *txt) {
	P0_0 = 0x01; // RS = 1;
	while(*txt != '\0') {
		send(*txt);
		txt++;
	}
} 
